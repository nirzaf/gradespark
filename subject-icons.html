/* ========= ROOT COLOR THEME ========= */
:root {
/* Base Palette */
--night: #151616; /* Very dark grey/black */
--white: #FEFEFE; /* Slightly off-white */
--celeste: #A0EBEB; /* Light turquoise/cyan accent */
--night-2: #0F0F0F;/* Darker black variant */
--white-2: #FFFFFF;/* Pure white */

/* Semantic Mapping (Adjust as needed) */
--background-dark: var(--night);
--background-darker: var(--night-2);
--text-light: var(--white);
--text-pure-white: var(--white-2);
--accent-primary: var(--celeste);
--accent-secondary: #80d8d8; /* Slightly darker celeste for variation */
--accent-tertiary: #c0f5f5; /* Lighter celeste for glows */

/* Subject Specific (using accents primarily) */
--tech-color: var(--accent-primary);
--science-color-1: var(--accent-primary);
--science-color-2: var(--accent-secondary);
--business-color-1: var(--accent-primary);
--business-color-2: var(--accent-secondary);
--humanities-color: var(--accent-primary);
}

/* ========= COMMON ICON STYLES ========= */
.icon-wrapper {
width: 60px;
height: 60px;
display: flex;
align-items: center;
justify-content: center;
position: relative;
background-color: var(--background-darker); /* Add a base background */
border-radius: 8px; /* Rounded corners for wrappers */
overflow: hidden; /* Clip animations that go outside */
box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5), 0 2px 4px rgba(0, 0, 0, 0.3);
}

/* ========= SUBJECT ICONS - ENHANCED ========= */

/* --- Accounting - Calculator --- */
.icon-accounting .calculator {
width: 38px;
height: 52px;
background: linear-gradient(145deg, var(--night), var(--background-darker));
border-radius: 5px;
position: relative;
border: 1px solid rgba(254, 254, 254, 0.1);
box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4), inset 0 1px 2px rgba(254, 254, 254, 0.05);
transform-style: preserve-3d; /* For subtle 3D effect */
transform: rotateX(5deg) rotateY(-3deg); /* Slight perspective */
}
.icon-accounting .screen {
width: 30px;
height: 12px;
background: var(--background-darker);
margin: 4px auto;
border-radius: 3px;
border: 1px solid var(--night);
box-shadow: inset 0 0 5px var(--accent-tertiary);
position: relative;
overflow: hidden;
}
.icon-accounting .screen::before { /* Screen glow */
content: '';
position: absolute;
top: 0; left: 0; right: 0; bottom: 0;
background: radial-gradient(circle at 30% 30%, var(--accent-tertiary), transparent 70%);
opacity: 0.6;
animation: screenFlicker 3s infinite alternate ease-in-out;
}
.icon-accounting .screen::after { /* Animated numbers */
content: '123+';
position: absolute;
top: 1px; right: 3px;
font-family: monospace;
font-size: 9px;
color: var(--accent-primary);
animation: changeNumber 5s infinite steps(4, end);
text-shadow: 0 0 3px var(--accent-primary);
}
.icon-accounting .buttons {
display: grid;
grid-template-columns: repeat(4, 1fr); /* More buttons */
gap: 3px;
padding: 0 4px;
margin-top: 5px;
}
.icon-accounting .button {
width: 6px;
height: 6px;
background: linear-gradient(145deg, #444, #222);
border-radius: 50%; /* Round buttons */
border: 1px solid #555;
box-shadow: 0 1px 1px rgba(0,0,0,0.5);
animation: pressButtonAdvanced 2.5s infinite ease-in-out;
transform-style: preserve-3d;
}
/* Stagger button presses */
.icon-accounting .button:nth-child(3n+1) { animation-delay: 0.1s; }
.icon-accounting .button:nth-child(3n+2) { animation-delay: 0.3s; }
.icon-accounting .button:nth-child(5) { background: var(--accent-secondary); animation-delay: 0.5s;} /* Special button
*/
.icon-accounting .button:nth-child(9) { animation-delay: 0.7s; }

@keyframes screenFlicker {
0%, 100% { opacity: 0.6; }
50% { opacity: 0.8; }
}
@keyframes changeNumber {
0% { content: '123+'; }
25% { content: '456-'; }
50% { content: '789*'; }
75% { content: '0=/'; }
}
@keyframes pressButtonAdvanced {
0%, 100% { transform: translateY(0); box-shadow: 0 1px 1px rgba(0,0,0,0.5); }
10%, 30% {
transform: translateY(1px);
background: var(--accent-primary);
box-shadow: 0 0 2px var(--accent-primary), inset 0 0 1px rgba(0,0,0,0.5);
}
20% { transform: translateY(0); box-shadow: 0 1px 1px rgba(0,0,0,0.5); background: linear-gradient(145deg, #444, #222);
}
/* Keep original bg unless pressed */
1%, 9%, 21%, 100% { background: linear-gradient(145deg, #444, #222); }
10.1%, 19.9% { background: var(--accent-primary); } /* Quick color change */
}


/* --- Additional Maths - Dynamic Graph --- */
.icon-add-maths .graph-container {
width: 50px; height: 50px;
position: relative;
perspective: 200px; /* Add perspective */
}
.icon-add-maths .grid {
position: absolute; inset: 0;
background-image:
linear-gradient(rgba(254, 254, 254, 0.1) 1px, transparent 1px),
linear-gradient(90deg, rgba(254, 254, 254, 0.1) 1px, transparent 1px);
background-size: 10px 10px;
opacity: 0.5;
animation: gridShift 10s infinite linear;
}
.icon-add-maths .axes {
position: absolute; inset: 0;
}
.icon-add-maths .x-axis, .icon-add-maths .y-axis {
position: absolute;
background-color: var(--text-light);
box-shadow: 0 0 3px var(--text-light);
}
.icon-add-maths .x-axis {
bottom: 5px; left: 0; width: 100%; height: 2px;
}
.icon-add-maths .y-axis {
bottom: 0; left: 5px; width: 2px; height: 100%;
}
.icon-add-maths .curve {
position: absolute;
bottom: 5px; left: 5px; /* Align with axes origin */
width: 45px; height: 45px;
border: 2px solid var(--accent-primary);
border-color: transparent transparent var(--accent-primary) var(--accent-primary);
border-radius: 50%;
transform: rotate(135deg) scale(0.8); /* Position and shape curve */
clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%); /* Use clip-path for drawing */
animation: drawCurveMath 4s infinite ease-in-out;
box-shadow: 0 0 8px var(--accent-primary);
}
.icon-add-maths .point {
position: absolute;
width: 4px; height: 4px;
background-color: var(--accent-tertiary);
border-radius: 50%;
box-shadow: 0 0 4px var(--accent-tertiary);
animation: movePoint 4s infinite ease-in-out;
}

@keyframes gridShift {
from { background-position: 0 0; }
to { background-position: 20px 20px; }
}
@keyframes drawCurveMath {
0% { clip-path: polygon(0% 100%, 0% 100%, 0% 100%, 0% 100%); transform: rotate(135deg) scale(0.8); }
50% { clip-path: polygon(0% 0%, 100% 100%, 100% 100%, 0% 100%); transform: rotate(135deg) scale(0.8); }
50.1% { transform: rotate(135deg) scale(0.8) translateY(2px); } /* Subtle pulse */
100% { clip-path: polygon(100% 0%, 100% 0%, 100% 100%, 100% 100%); transform: rotate(135deg) scale(0.8); }
}
@keyframes movePoint { /* Approximates moving along the drawn curve */
0% { bottom: 7px; left: 7px; opacity: 0; }
10% { opacity: 1; }
50% { bottom: 25px; left: 35px; opacity: 1; transform: scale(1.2); }
90% { opacity: 1; }
100% { bottom: 7px; left: 45px; opacity: 0; } /* Move off-screen aligned with redraw */
}


/* --- Biology - DNA Helix --- */
.icon-biology .dna-container {
width: 30px; height: 50px;
position: relative;
perspective: 300px; /* More depth */
}
.icon-biology .strand-pair {
position: absolute;
width: 100%; height: 100%;
animation: rotateDNA 5s infinite linear;
transform-style: preserve-3d;
}
.icon-biology .strand {
position: absolute;
width: 8px; height: 100%;
background: var(--science-color-1);
border-radius: 4px;
transform-origin: center center;
}
.icon-biology .strand.s1 {
background: linear-gradient(var(--science-color-1), var(--science-color-2));
transform: translateX(-6px) rotateY(0deg); /* Start separated */
}
.icon-biology .strand.s2 {
background: linear-gradient(var(--science-color-2), var(--science-color-1));
transform: translateX(6px) rotateY(0deg); /* Start separated */
}
.icon-biology .base-pair {
position: absolute;
left: calc(50% - 8px); /* Center the pair */
width: 16px; height: 3px;
background-color: var(--accent-tertiary);
border-radius: 2px;
transform-origin: center center;
animation: basePairPulse 5s infinite linear; /* Sync with rotation */
box-shadow: 0 0 2px var(--accent-tertiary);
}
/* Create multiple base pairs with staggered animations */
.icon-biology .base-pair:nth-child(1) { top: 10%; animation-delay: 0s; }
.icon-biology .base-pair:nth-child(2) { top: 30%; animation-delay: -0.5s; }
.icon-biology .base-pair:nth-child(3) { top: 50%; animation-delay: -1.0s; }
.icon-biology .base-pair:nth-child(4) { top: 70%; animation-delay: -1.5s; }
.icon-biology .base-pair:nth-child(5) { top: 90%; animation-delay: -2.0s; }

@keyframes rotateDNA {
from { transform: rotateY(0deg); }
to { transform: rotateY(360deg); }
}
@keyframes basePairPulse { /* Pulse slightly and rotate with the main structure */
from { transform: rotateX(0deg) scale(1); opacity: 0.8; }
50% { transform: rotateX(180deg) scale(1.1); opacity: 1; }
to { transform: rotateX(360deg) scale(1); opacity: 0.8; }
}


/* --- Business Studies - Animated Bar/Line Chart --- */
.icon-business .chart-container {
width: 50px; height: 45px;
position: relative;
border-bottom: 2px solid var(--text-light);
border-left: 2px solid var(--text-light);
padding-left: 5px; /* Space from Y axis */
padding-bottom: 5px; /* Space from X axis */
}
.icon-business .bars {
display: flex;
align-items: flex-end;
justify-content: space-around;
height: 100%;
}
.icon-business .bar {
width: 8px;
border-radius: 3px 3px 0 0;
background: linear-gradient(to top, var(--business-color-1), var(--business-color-2));
box-shadow: inset 0 0 3px rgba(0,0,0,0.3);
transform-origin: bottom;
animation: growAndShrinkBar 3s infinite ease-in-out;
}
.icon-business .bar1 { height: 20px; animation-delay: 0s; }
.icon-business .bar2 { height: 35px; animation-delay: 0.2s; background: linear-gradient(to top, var(--business-color-2),
var(--accent-tertiary));}
.icon-business .bar3 { height: 25px; animation-delay: 0.4s; }

/* Add a trend line overlay */
.icon-business .trend-line {
position: absolute;
bottom: 15px; /* Adjust vertical position */
left: 5px;
width: 45px; height: 2px;
background: var(--accent-tertiary);
transform-origin: left center;
animation: trendLineAnim 3s infinite ease-in-out;
opacity: 0.8;
box-shadow: 0 0 4px var(--accent-tertiary);
}

@keyframes growAndShrinkBar {
0%, 100% { transform: scaleY(0.1); opacity: 0.5; }
50% { transform: scaleY(1); opacity: 1; }
75% { transform: scaleY(0.8); opacity: 0.9; } /* Add intermediate step */
}
@keyframes trendLineAnim {
0%, 100% { transform: scaleX(0) rotate(5deg); opacity: 0; }
10% { transform: scaleX(0.5) rotate(5deg); opacity: 0.8; }
50% { transform: scaleX(1) rotate(-2deg); opacity: 0.8;} /* Follows bars roughly */
90% { transform: scaleX(0.8) rotate(-2deg); opacity: 0.8;}
99% { opacity: 0; }
}


/* --- Chemistry - Bubbling Beaker with Swirl --- */
.icon-chemistry .beaker {
width: 40px; height: 50px;
border: 3px solid var(--text-light);
border-top: none;
border-radius: 0 0 20px 20px; /* More pronounced curve */
position: relative;
background: linear-gradient(to top, var(--accent-secondary) 0%, var(--accent-primary) 60%, transparent 60%); /* Liquid
*/
overflow: hidden; /* Keep bubbles inside */
box-shadow: inset 0 -5px 10px rgba(0,0,0,0.2);
}
.icon-chemistry .beaker::before { /* Top rim */
content: '';
position: absolute;
top: -6px; left: -3px; right: -3px;
height: 8px; /* Thicker rim */
border: 3px solid var(--text-light);
border-radius: 5px 5px 0 0;
border-bottom: none;
background: var(--background-dark); /* Match background */
}
.icon-chemistry .liquid-surface { /* Animated surface */
position: absolute;
top: 18px; /* 60% of 50px height minus border/rim? Adjust */
left: 0; right: 0; height: 5px;
background: var(--accent-tertiary);
opacity: 0.5;
border-radius: 50%;
animation: swirlLiquid 4s infinite ease-in-out;
}
.icon-chemistry .bubble {
position: absolute;
bottom: -5px; /* Start below visible area */
width: 4px; height: 4px;
background-color: var(--white-2);
border-radius: 50%;
opacity: 0;
animation: bubbleUpAdvanced 2s infinite ease-out;
box-shadow: 0 0 2px var(--white-2);
}
/* More bubbles, varied timing and paths */
.icon-chemistry .bubble:nth-child(1) { left: 30%; animation-duration: 1.8s; animation-delay: 0s; width: 5px; height:
5px; }
.icon-chemistry .bubble:nth-child(2) { left: 60%; animation-duration: 2.2s; animation-delay: 0.3s; }
.icon-chemistry .bubble:nth-child(3) { left: 45%; animation-duration: 1.5s; animation-delay: 0.8s; width: 3px; height:
3px; }
.icon-chemistry .bubble:nth-child(4) { left: 70%; animation-duration: 2.5s; animation-delay: 1.2s; }
.icon-chemistry .bubble:nth-child(5) { left: 20%; animation-duration: 1.9s; animation-delay: 1.5s; }

@keyframes swirlLiquid {
0%, 100% { transform: translateX(0) scaleX(1); border-radius: 50%; }
25% { transform: translateX(-2px) scaleX(0.95); border-radius: 40% 60% 50% 50% / 60% 40% 50% 50%; }
50% { transform: translateX(0) scaleX(1); border-radius: 50%; }
75% { transform: translateX(2px) scaleX(0.95); border-radius: 60% 40% 50% 50% / 40% 60% 50% 50%; }
}
@keyframes bubbleUpAdvanced {
0% { bottom: -5px; opacity: 0; transform: scale(0.5) translateX(0); }
20% { opacity: 0.9; transform: scale(1) translateX(0); } /* Appear */
80% { opacity: 0.7; }
100% {
bottom: 25px; /* Pop below surface */
opacity: 0;
transform: scale(0.8) translateX(calc(var(--i, 1) * 5px)); /* Add horizontal drift */
}
}
/* Add drift dynamically (might need JS for true randomness, CSS approx.) */
.icon-chemistry .bubble:nth-child(odd) { --i: 1; }
.icon-chemistry .bubble:nth-child(even) { --i: -1; }


/* --- Computer Science - Animated Terminal --- */
.icon-cs .terminal {
width: 52px; height: 42px;
background: var(--night-2);
border: 1px solid var(--night);
border-radius: 5px;
padding: 4px;
position: relative;
overflow: hidden;
box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.5), 0 0 10px rgba(160, 235, 235, 0.2); /* Outer glow */
font-family: 'Courier New', Courier, monospace;
font-size: 7px; /* Smaller font */
line-height: 1.4;
}
.icon-cs .terminal::before { /* Scanline effect */
content: '';
position: absolute; inset: 0;
background: linear-gradient(transparent 50%, rgba(0,0,0,0.2) 50%);
background-size: 100% 4px;
opacity: 0.3;
animation: scanlines 10s infinite linear;
}
.icon-cs .line {
color: var(--accent-primary);
opacity: 0;
white-space: nowrap;
animation: typeLine 8s infinite ease-in-out;
text-shadow: 0 0 3px var(--accent-primary);
}
.icon-cs .line1 { animation-delay: 0s; content: '> npm install magic...'; } /* Example text */
.icon-cs .line2 { animation-delay: 2s; content: 'Fetching packages...'; }
.icon-cs .line3 { animation-delay: 4s; content: 'Compiled successfully!'; }
.icon-cs .line4 { animation-delay: 6s; content: '_'; animation: blinkCursor 1s infinite step-end; } /* Cursor line */

@keyframes scanlines {
from { background-position: 0 0; }
to { background-position: 0 -8px; } /* Move scanlines up */
}
@keyframes typeLine { /* Simulate typing and scrolling up */
0% { transform: translateY(30px); opacity: 0; } /* Start off-screen */
10% { transform: translateY(0); opacity: 1; width: 0ch; } /* Appear */
40% { width: 20ch; } /* Type out (adjust '20ch' based on longest line) */
60% { opacity: 1; transform: translateY(0); } /* Hold */
80% { opacity: 0.5; }
100% { opacity: 0; transform: translateY(-30px); } /* Scroll up and fade */
}
@keyframes blinkCursor {
0%, 50% { color: var(--accent-primary); text-shadow: 0 0 3px var(--accent-primary); }
51%, 100% { color: transparent; text-shadow: none; }
}
/* CSS for content (alternative to JS) */
.icon-cs .line1::before { content: '> npm install magic...'; }
.icon-cs .line2::before { content: 'Fetching packages...'; }
.icon-cs .line3::before { content: 'Compiled successfully!'; }
.icon-cs .line4::before { content: '_'; } /* Cursor character */

/* Note: Pure CSS typing is limited. This simulates line appearance. */


/* --- Economics - Dynamic Stock Ticker Arrow --- */
.icon-economics .chart-bg { /* Add a subtle background chart */
position: absolute; inset: 5px;
border: 1px solid rgba(254, 254, 254, 0.1);
background-image:
linear-gradient(rgba(160, 235, 235, 0.05) 1px, transparent 1px),
linear-gradient(90deg, rgba(160, 235, 235, 0.05) 1px, transparent 1px);
background-size: 8px 8px;
opacity: 0.5;
}
.icon-economics .arrow-path { /* Container for complex movement */
width: 35px; height: 35px;
position: relative;
animation: erraticTrend 4s infinite ease-in-out;
}
.icon-economics .arrow-head {
width: 0; height: 0;
border-left: 8px solid transparent;
border-right: 8px solid transparent;
border-bottom: 14px solid var(--accent-primary); /* Larger head */
position: absolute;
top: 0; left: calc(50% - 8px);
transform-origin: bottom center;
filter: drop-shadow(0 0 3px var(--accent-primary));
}
.icon-economics .arrow-body {
width: 6px; /* Thicker body */
height: 25px;
background: var(--accent-primary);
position: absolute;
top: 10px; /* Connect below head */
left: calc(50% - 3px);
border-radius: 2px;
transform-origin: top center;
}

@keyframes erraticTrend { /* More dynamic up/down movement */
0% { transform: translateY(8px) rotate(5deg); }
25% { transform: translateY(-8px) rotate(-8deg) scale(1.1); }
50% { transform: translateY(0px) rotate(0deg) scale(1); }
75% { transform: translateY(5px) rotate(6deg) scale(0.95); }
100% { transform: translateY(8px) rotate(5deg); }
}
/* Add glow pulse to arrow */
.icon-economics .arrow-head, .icon-economics .arrow-body {
animation: pulseGlowEconomic 1s infinite alternate ease-in-out;
}
@keyframes pulseGlowEconomic {
from { filter: drop-shadow(0 0 3px var(--accent-primary)); opacity: 0.9; }
to { filter: drop-shadow(0 0 8px var(--accent-tertiary)); opacity: 1; }
}


/* --- Geography - Rotating 3D Globe --- */
.icon-geography .globe-container {
perspective: 400px; /* Set perspective for 3D */
}
.icon-geography .globe {
width: 48px; height: 48px;
border-radius: 50%;
position: relative;
transform-style: preserve-3d; /* Enable 3D for children */
animation: spinGlobe3D 10s infinite linear;
box-shadow: 0 0 15px rgba(160, 235, 235, 0.3), inset 0 0 10px rgba(0,0,0,0.5); /* Glow + Inset Shadow */
}
.icon-geography .globe-surface { /* The blue sphere */
position: absolute; inset: 0;
background: radial-gradient(circle at 30% 30%, var(--accent-tertiary), var(--accent-secondary) 70%,
var(--accent-primary) 100%);
border-radius: 50%;
}
.icon-geography .land { /* Position land masses in 3D space */
position: absolute;
background-color: var(--night); /* Dark land masses */
opacity: 0.8;
border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%; /* Irregular shape */
box-shadow: 0 0 5px rgba(0,0,0,0.5);
}
/* Position using translateZ for depth */
.icon-geography .land1 {
top: 5px; left: 10px; width: 25px; height: 18px;
transform: rotate(-20deg) translateZ(10px); /* Bring forward slightly */
}
.icon-geography .land2 {
bottom: 8px; right: 5px; width: 20px; height: 15px;
transform: rotate(30deg) translateZ(5px);
}
.icon-geography .land3 { /* Add one more, slightly 'behind' */
top: 20px; left: 25px; width: 12px; height: 10px;
transform: rotate(10deg) translateZ(-5px);
opacity: 0.6;
}
/* Atmosphere layer */
.icon-geography .atmosphere {
position: absolute; inset: -3px; /* Slightly larger */
border-radius: 50%;
background: radial-gradient(circle, transparent 70%, rgba(160, 235, 235, 0.2) 90%, rgba(160, 235, 235, 0.0) 100%);
animation: pulseAtmosphere 5s infinite alternate ease-in-out;
}

@keyframes spinGlobe3D {
from { transform: rotateY(0deg) rotateX(5deg); } /* Add slight X tilt */
to { transform: rotateY(360deg) rotateX(5deg); }
}
@keyframes pulseAtmosphere {
from { opacity: 0.8; transform: scale(1); }
to { opacity: 1; transform: scale(1.05); }
}


/* --- History - Hourglass with Granular Flow --- */
.icon-history .hourglass {
width: 32px; height: 48px;
position: relative;
filter: drop-shadow(0 2px 3px rgba(0,0,0,0.3));
}
.icon-history .hg-frame-top, .icon-history .hg-frame-bottom {
position: absolute; left: 0; right: 0; height: 4px;
background: var(--night);
border-radius: 2px;
}
.icon-history .hg-frame-top { top: 0; }
.icon-history .hg-frame-bottom { bottom: 0; }
.icon-history .hg-glass {
position: absolute; top: 4px; bottom: 4px; left: 4px; right: 4px;
border-left: 2px solid var(--text-light);
border-right: 2px solid var(--text-light);
opacity: 0.5; /* Make glass semi-transparent */
}
.icon-history .hg-glass::before, .icon-history .hg-glass::after { /* Bulb shapes */
content: ''; position: absolute; left: -6px; right: -6px; /* Wider */
height: 50%;
border: 2px solid var(--text-light);
border-radius: 50%;
}
.icon-history .hg-glass::before { top: -2px; border-bottom: none; border-radius: 0 0 15px 15px; }
.icon-history .hg-glass::after { bottom: -2px; border-top: none; border-radius: 15px 15px 0 0; }

.icon-history .sand-container {
position: absolute; top: 6px; bottom: 6px; left: 6px; right: 6px;
overflow: hidden; /* Clip sand */
}
.icon-history .sand-top {
position: absolute; top: 0; left: 0; right: 0; height: 50%;
background: var(--accent-primary);
border-radius: 0 0 8px 8px;
animation: sandLevelTop 6s infinite linear;
transform-origin: bottom center;
}
.icon-history .sand-bottom {
position: absolute; bottom: 0; left: 0; right: 0; height: 0%;
background: var(--accent-primary);
border-radius: 8px 8px 0 0; /* Rounded top */
animation: sandLevelBottom 6s infinite linear;
transform-origin: bottom center;
}
.icon-history .sand-stream { /* Use multiple particles */
position: absolute;
top: 45%; left: 50%;
width: 1px; height: 1px;
background: var(--accent-tertiary);
border-radius: 50%;
box-shadow: 0 0 1px var(--accent-tertiary);
animation: fallParticle 0.5s infinite linear; /* Faster particle fall */
}
/* Stagger particles */
.icon-history .sand-stream:nth-child(2) { animation-delay: 0.1s; transform: translateX(-1px);}
.icon-history .sand-stream:nth-child(3) { animation-delay: 0.25s; transform: translateX(1px);}
.icon-history .sand-stream:nth-child(4) { animation-delay: 0.4s; }

@keyframes sandLevelTop {
0% { height: 50%; }
95%, 100% { height: 0%; }
}
@keyframes sandLevelBottom {
0%, 5% { height: 0%; }
100% { height: 50%; }
}
@keyframes fallParticle {
from { top: 45%; opacity: 1; }
to { top: 60%; opacity: 0; } /* Fall shorter distance */
}


/* --- Human Biology - Organic Heartbeat --- */
.icon-human-bio .heart-container {
width: 40px; height: 40px;
position: relative;
filter: drop-shadow(0 0 5px var(--accent-secondary));
animation: beatOrganic 1.3s infinite ease-in-out;
}
.icon-human-bio .heart {
width: 100%; height: 100%;
position: relative;
}
.icon-human-bio .heart::before,
.icon-human-bio .heart::after { /* Smoother heart shape */
content: ""; position: absolute;
top: 5px; width: 20px; height: 32px; /* Adjust positioning */
background: radial-gradient(circle at 50% 30%, var(--accent-tertiary), var(--science-color-2));
border-radius: 20px 20px 5px 5px; /* Adjust rounding */
transform-origin: 50% 100%;
}
.icon-human-bio .heart::before {
left: 0; transform: rotate(-45deg) translateX(2px); /* Fine-tune position */
}
.icon-human-bio .heart::after {
right: 0; transform: rotate(45deg) translateX(-2px); /* Fine-tune position */
}
/* Add subtle electrical pulse */
.icon-human-bio .pulse-spark {
position: absolute;
width: 4px; height: 4px;
background: var(--white-2);
border-radius: 50%;
opacity: 0;
animation: sparkPulse 1.3s infinite ease-out;
box-shadow: 0 0 5px var(--white-2);
}

@keyframes beatOrganic { /* More complex scale/skew */
0% { transform: scale(1) rotate(0deg); }
15% { transform: scale(1.15, 1.1) rotate(-1deg); } /* Pump out */
30% { transform: scale(1) rotate(0deg); }
45% { transform: scale(0.98, 1.02) rotate(1deg); } /* Slight intake */
60% { transform: scale(1) rotate(0deg); }
100% { transform: scale(1) rotate(0deg); }
}
@keyframes sparkPulse {
0% { opacity: 0; top: 30%; left: 50%; transform: scale(0.5);}
10% { opacity: 0;} /* Delay appearance */
15% { opacity: 1; transform: scale(1);} /* Flash during pump */
20% { opacity: 0; transform: scale(0.5);}
100% { opacity: 0; }
}


/* --- ICT - Data Flow Network --- */
.icon-ict .network {
width: 50px; height: 50px;
position: relative;
transform: rotate(10deg); /* Slight tilt */
}
.icon-ict .node {
width: 10px; height: 10px;
background: radial-gradient(circle, var(--accent-tertiary), var(--tech-color));
border-radius: 50%;
position: absolute;
box-shadow: 0 0 5px var(--tech-color);
animation: pulseNodeICT 2.5s infinite ease-in-out alternate;
}
/* Position nodes more dynamically */
.icon-ict .node1 { top: 5px; left: 20px; animation-delay: 0s; }
.icon-ict .node2 { top: 25px; left: 5px; animation-delay: 0.6s; }
.icon-ict .node3 { top: 25px; right: 5px; animation-delay: 1.2s; }
.icon-ict .node4 { bottom: 5px; left: 20px; animation-delay: 1.8s; }

.icon-ict .connection { /* Use ::before/::after for lines */
position: absolute;
height: 2px;
background: var(--accent-secondary);
opacity: 0.5;
transform-origin: center;
}
.icon-ict .connection::after { /* Data packet */
content: '';
position: absolute;
top: -1px; /* Center on line */
left: 0;
width: 4px; height: 4px;
background: var(--white-2);
border-radius: 50%;
box-shadow: 0 0 3px var(--white-2);
opacity: 0;
animation: dataPacketFlow 2.5s infinite linear;
}
/* Define connections and stagger packet flow */
.icon-ict .conn12 { width: 21px; top: 19px; left: 10px; transform: rotate(56deg); animation-delay: 0.3s; }
.icon-ict .conn13 { width: 21px; top: 19px; right: 10px; transform: rotate(-56deg); animation-delay: 0.9s; }
.icon-ict .conn24 { width: 28px; top: 32px; left: 8px; transform: rotate(90deg); animation-delay: 1.5s; }
.icon-ict .conn34 { width: 28px; top: 32px; right: 8px; transform: rotate(90deg); animation-delay: 2.1s; }
.icon-ict .conn12::after { animation-delay: 0.3s; }
.icon-ict .conn13::after { animation-delay: 0.9s; }
.icon-ict .conn24::after { animation-delay: 1.5s; }
.icon-ict .conn34::after { animation-delay: 2.1s; }

@keyframes pulseNodeICT {
from { transform: scale(1); box-shadow: 0 0 5px var(--tech-color); }
to { transform: scale(1.2); box-shadow: 0 0 10px var(--accent-tertiary); }
}
@keyframes dataPacketFlow {
0% { left: 0%; opacity: 0; }
10% { opacity: 1; }
90% { opacity: 1; }
100% { left: 100%; opacity: 0; }
}


/* --- Language - Dynamic Speech Bubbles --- */
.icon-language .bubble-container {
width: 50px; height: 40px; position: relative;
}
.icon-language .bubble {
position: absolute;
border-radius: 50%;
background: var(--accent-primary);
filter: drop-shadow(0 1px 2px rgba(0,0,0,0.3));
animation: floatAndPulse 4s infinite ease-in-out;
}
.icon-language .bubble::after { /* Tail */
content: '';
position: absolute;
width: 0; height: 0;
border-style: solid;
}
/* Bubble 1 (Larger, typing) */
.icon-language .bubble1 {
width: 35px; height: 25px;
top: 0px; left: 0px;
border-radius: 15px 15px 15px 5px; /* Speech bubble shape */
animation-delay: 0s;
}
.icon-language .bubble1::after { /* Tail position */
border-width: 8px 0 0 8px;
border-color: var(--accent-primary) transparent transparent transparent;
bottom: -6px; left: 8px;
}
.icon-language .typing-dots {
position: absolute; top: 50%; left: 50%;
transform: translate(-50%, -50%);
display: flex; gap: 2px;
}
.icon-language .dot {
width: 4px; height: 4px;
background: var(--background-dark);
border-radius: 50%;
opacity: 0;
animation: typing 1.5s infinite;
}
.icon-language .dot:nth-child(1) { animation-delay: 0s; }
.icon-language .dot:nth-child(2) { animation-delay: 0.2s; }
.icon-language .dot:nth-child(3) { animation-delay: 0.4s; }

/* Bubble 2 (Smaller, response) */
.icon-language .bubble2 {
width: 25px; height: 18px;
bottom: 0px; right: 0px;
border-radius: 10px 10px 5px 10px; /* Different shape */
background: var(--accent-secondary);
animation-delay: 2s; /* Respond later */
}
.icon-language .bubble2::after { /* Tail position */
border-width: 0 8px 8px 0;
border-color: transparent var(--accent-secondary) transparent transparent;
bottom: -6px; right: 8px;
}

@keyframes floatAndPulse {
0%, 100% { transform: translateY(0) scale(1); }
50% { transform: translateY(-4px) scale(1.05); } /* More float, slight pulse */
75% { transform: translateY(2px) scale(0.98); }
}
@keyframes typing {
0%, 60%, 100% { opacity: 0; transform: scale(0.8); }
30% { opacity: 1; transform: scale(1); }
}


/* --- Literature - Animated Book --- */
.icon-literature .book-container {
perspective: 300px;
}
.icon-literature .book {
width: 40px; height: 30px;
position: relative;
transform-style: preserve-3d;
animation: gentleOpenBook 5s infinite ease-in-out alternate;
transform: rotateX(10deg); /* Angle the book */
}
.icon-literature .cover {
position: absolute; width: 100%; height: 100%;
background: var(--night);
border: 1px solid var(--accent-secondary);
border-radius: 2px 4px 4px 2px;
transform-origin: left center;
backface-visibility: hidden; /* Hide back when closed */
box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
}
.icon-literature .cover.front {
background: linear-gradient(110deg, var(--night) 60%, var(--night-2) 100%);
z-index: 10;
transform: rotateY(-10deg); /* Start slightly open */
animation: openCover 5s infinite ease-in-out alternate;
transform-origin: left center;
}
.icon-literature .cover.back {
background: var(--night-2);
transform: rotateY(0deg) translateZ(-2px); /* Slight depth */
}
.icon-literature .page {
position: absolute; top: 2px; bottom: 2px; width: 18px; /* Slightly smaller than cover */
background-color: var(--white);
border: 1px solid #ddd;
transform-origin: left center;
animation: turnPage 5s infinite ease-in-out;
transform-style: preserve-3d; /* For text */
}
.icon-literature .page-right { /* Static right page */
right: 2px; background: #f0f0f0;
border-radius: 0 2px 2px 0;
transform: rotateY(0deg) translateZ(-1px); /* Behind front cover */
}
.icon-literature .page-left { /* Animated turning page */
left: 2px;
border-radius: 2px 0 0 2px;
animation-delay: 0s; /* Start turning immediately */
transform: rotateY(0deg);
background: linear-gradient(to right, #e8e8e8, var(--white));
}
.icon-literature .page-left::before { /* Text lines */
content: ''; position: absolute; inset: 3px 3px 3px 5px;
background: repeating-linear-gradient(var(--night) 0 1px, transparent 1px 4px);
opacity: 0.3;
animation: textFade 5s infinite ease-in-out;
}

@keyframes gentleOpenBook { /* Subtle movement of the whole book */
from { transform: rotateX(10deg) rotateY(0deg); }
to { transform: rotateX(12deg) rotateY(-5deg); }
}
@keyframes openCover {
0% { transform: rotateY(-10deg); }
50%, 100% { transform: rotateY(-150deg); } /* Open wider */
}
@keyframes turnPage {
0% { transform: rotateY(0deg); opacity: 1; z-index: 5;}
40% { opacity: 1; }
50% { transform: rotateY(-180deg); opacity: 0.5; z-index: 1;} /* Flip and fade */
100% { transform: rotateY(-180deg); opacity: 0.5; z-index: 1;}
}
@keyframes textFade {
0%, 40% { opacity: 0.3; }
50%, 100% { opacity: 0; } /* Text disappears as page turns */
}

/* --- Mathematics - Abstract Pi Swirl --- */
.icon-math .pi-container {
width: 40px; height: 40px;
position: relative;
perspective: 200px;
}
.icon-math .pi-symbol {
position: absolute; inset: 0;
display: flex; align-items: center; justify-content: center;
font-size: 40px; font-weight: bold;
color: var(--accent-primary);
text-shadow: 0 0 8px var(--accent-primary);
animation: pulsePi 3s infinite ease-in-out;
transform-style: preserve-3d;
}
.icon-math .pi-symbol span { /* Add 3D depth */
display: block;
transform: translateZ(-2px);
opacity: 0.5;
color: var(--accent-secondary);
filter: blur(1px);
}
/* Digit swirl effect */
.icon-math .digit {
position: absolute;
top: 50%; left: 50%;
width: 10px; height: 10px; /* Small area */
font-size: 8px;
color: var(--accent-tertiary);
opacity: 0.7;
animation: swirlDigit 4s infinite linear;
transform-origin: 0 0; /* Rotate around center */
}
.icon-math .digit::before { content: '3'; } /* Use pseudo for content */
.icon-math .digit:nth-child(2)::before { content: '1'; animation-delay: -0.5s; }
.icon-math .digit:nth-child(3)::before { content: '4'; animation-delay: -1.0s; }
.icon-math .digit:nth-child(4)::before { content: '1'; animation-delay: -1.5s; }
.icon-math .digit:nth-child(5)::before { content: '5'; animation-delay: -2.0s; }
.icon-math .digit:nth-child(6)::before { content: '9'; animation-delay: -2.5s; }

@keyframes pulsePi {
0%, 100% { transform: scale(1); text-shadow: 0 0 8px var(--accent-primary); }
50% { transform: scale(1.1); text-shadow: 0 0 15px var(--accent-tertiary); }
}
@keyframes swirlDigit {
0% { transform: rotate(0deg) translateX(20px) rotate(0deg); opacity: 0; }
10% { opacity: 0.7; }
90% { opacity: 0.7; }
100% { transform: rotate(360deg) translateX(20px) rotate(-360deg); opacity: 0; } /* Rotate digit itself too */
}


/* --- Physics - Atom with Electron Trails --- */
.icon-physics .atom {
width: 50px; height: 50px;
position: relative;
perspective: 400px; /* Enhanced 3D */
}
.icon-physics .nucleus {
width: 12px; height: 12px; /* Slightly larger */
background: radial-gradient(circle, var(--accent-tertiary), var(--science-color-2));
border-radius: 50%;
position: absolute; top: 50%; left: 50%;
transform: translate(-50%, -50%) translateZ(5px); /* Bring nucleus forward */
z-index: 2;
box-shadow: 0 0 8px var(--science-color-2);
animation: pulseNucleus 2s infinite alternate ease-in-out;
}
.icon-physics .orbit {
position: absolute; top: 50%; left: 50%;
border: 1px dashed rgba(160, 235, 235, 0.3); /* Dashed lines */
border-radius: 50%;
transform-style: preserve-3d;
animation: rotateOrbitPhysics 4s infinite linear;
}
.icon-physics .orbit1 { width: 45px; height: 45px; transform: translate(-50%, -50%) rotateX(70deg) rotateY(20deg);
animation-duration: 4s; }
.icon-physics .orbit2 { width: 45px; height: 45px; transform: translate(-50%, -50%) rotateX(70deg) rotateY(110deg);
animation-duration: 5s; } /* Different angle/speed */
.icon-physics .orbit3 { width: 45px; height: 45px; transform: translate(-50%, -50%) rotateX(70deg) rotateY(200deg);
animation-duration: 6s; } /* Another angle/speed */

.icon-physics .electron {
width: 6px; height: 6px;
background: var(--accent-primary);
border-radius: 50%;
position: absolute;
/* Positioned dynamically via parent animation */
top: -3px; left: calc(50% - 3px); /* Center on orbit path */
box-shadow: 0 0 4px var(--accent-primary);
transform-style: preserve-3d; /* For trail */
}
.icon-physics .electron::after { /* Electron trail */
content: '';
position: absolute;
width: 100%; height: 100%;
top: 0; left: -50%; /* Trail behind */
background: linear-gradient(to left, transparent, var(--accent-primary));
border-radius: 50%;
opacity: 0.6;
transform: scaleX(3) scaleY(0.5) rotate(180deg); /* Stretched trail shape */
filter: blur(1px);
animation: electronTrailFade 0.5s infinite linear alternate;
}

@keyframes rotateOrbitPhysics { /* Base rotation, specific transforms applied inline */
from { transform: translate(-50%, -50%) rotateX(70deg) rotateZ(0deg); }
to { transform: translate(-50%, -50%) rotateX(70deg) rotateZ(360deg); }
}
/* Note: inline transforms + keyframes rotation makes complex paths */
@keyframes pulseNucleus {
from { transform: translate(-50%, -50%) translateZ(5px) scale(1); box-shadow: 0 0 8px var(--science-color-2); }
to { transform: translate(-50%, -50%) translateZ(5px) scale(1.1); box-shadow: 0 0 12px var(--accent-tertiary); }
}
@keyframes electronTrailFade {
from { opacity: 0.2; transform: scaleX(2) scaleY(0.5) rotate(180deg); }
to { opacity: 0.6; transform: scaleX(3) scaleY(0.5) rotate(180deg); }
}


/* --- Psychology - Pulsing Brain Network --- */
.icon-psychology .brain {
width: 45px; height: 40px;
position: relative;
filter: drop-shadow(0 0 5px var(--accent-primary));
}
/* Use SVG-like curves with borders */
.icon-psychology .lobe {
position: absolute;
border: 2px solid var(--accent-secondary);
background-color: rgba(160, 235, 235, 0.1); /* Fill */
animation: pulseBrainLobe 2.5s infinite alternate ease-in-out;
}
.icon-psychology .lobe1 { /* Left hemisphere */
width: 28px; height: 38px;
top: 0; left: 0;
border-radius: 50% 40% 30% 50% / 50% 50% 40% 40%;
animation-delay: 0s;
}
.icon-psychology .lobe2 { /* Right hemisphere */
width: 28px; height: 38px;
top: 0; right: 0;
border-radius: 40% 50% 50% 30% / 50% 40% 40% 50%;
animation-delay: 0.3s; /* Slightly offset pulse */
}
/* Synapse connection */
.icon-psychology .synapse {
position: absolute;
width: 3px; height: 3px;
background-color: var(--white-2);
border-radius: 50%;
opacity: 0;
animation: fireSynapse 2.5s infinite ease-out;
box-shadow: 0 0 4px var(--white-2);
z-index: 5;
}
/* Position synapses */
.icon-psychology .synapse1 { top: 30%; left: 48%; animation-delay: 0.5s; }
.icon-psychology .synapse2 { top: 50%; left: 48%; animation-delay: 1.5s; }
.icon-psychology .synapse3 { top: 70%; left: 48%; animation-delay: 2.0s; }

@keyframes pulseBrainLobe {
from { transform: scale(1); border-color: var(--accent-secondary); background-color: rgba(160, 235, 235, 0.1); }
to { transform: scale(1.05); border-color: var(--accent-tertiary); background-color: rgba(160, 235, 235, 0.2); }
}
@keyframes fireSynapse {
0% { opacity: 0; transform: scale(0.5) translateX(-5px); } /* Start left */
10% { opacity: 1; transform: scale(1) translateX(0); } /* Center flash */
20% { opacity: 0; transform: scale(0.5) translateX(5px); } /* End right */
100% { opacity: 0; }
}


/* --- Sociology - Interacting Figures --- */
.icon-sociology .figures-container {
width: 50px; height: 40px;
position: relative;
}
.icon-sociology .figure {
position: absolute;
bottom: 0;
width: 12px; /* Slightly wider */
height: 20px;
background-color: var(--accent-primary);
border-radius: 6px 6px 0 0; /* Rounded head */
animation: figureInteraction 4s infinite ease-in-out;
transform-origin: bottom center;
}
.icon-sociology .figure::before { /* Head */
content: '';
position: absolute;
top: -5px; left: calc(50% - 5px);
width: 10px; height: 10px;
background-color: inherit; /* Match body */
border-radius: 50%;
}
/* Position figures */
.icon-sociology .figure1 { left: 5px; animation-delay: 0s; background-color: var(--accent-primary); }
.icon-sociology .figure2 { left: 50%; transform: translateX(-50%); height: 25px; animation-delay: 0.5s;
background-color: var(--accent-secondary); } /* Taller middle figure */
.icon-sociology .figure3 { right: 5px; animation-delay: 1s; background-color: var(--accent-primary); }

/* Connection lines */
.icon-sociology .connection-line {
position: absolute;
bottom: 10px; /* Mid-body level */
height: 1px;
background: var(--accent-tertiary);
opacity: 0;
transform-origin: left center;
animation: drawConnection 4s infinite ease-in-out;
}
.icon-sociology .conn12 { left: 11px; width: 14px; animation-delay: 1.5s; } /* Figure 1 to 2 */
.icon-sociology .conn23 { left: 25px; width: 14px; animation-delay: 2s; } /* Figure 2 to 3 */

@keyframes figureInteraction { /* Subtle bounce and sway */
0%, 100% { transform: translateY(0) rotate(0deg); }
25% { transform: translateY(-3px) rotate(-2deg); }
50% { transform: translateY(0) rotate(0deg); }
75% { transform: translateY(-2px) rotate(2deg); }
}
@keyframes drawConnection {
0% { transform: scaleX(0); opacity: 0; }
10% { transform: scaleX(1); opacity: 0.7; }
40% { transform: scaleX(1); opacity: 0.7; }
50% { transform: scaleX(0); opacity: 0; transform-origin: right center; } /* Erase from other end */
100% { transform: scaleX(0); opacity: 0; transform-origin: right center; }
}


/* --- Statistics - Animated Bell Curve --- */
.icon-stats .curve-container {
width: 50px; height: 40px;
position: relative;
border-bottom: 2px solid var(--text-light); /* X-axis */
}
.icon-stats .curve-shape { /* SVG-like curve drawing */
position: absolute;
bottom: 0; left: 0;
width: 100%; height: 100%;
stroke: var(--accent-primary);
stroke-width: 2;
fill: rgba(160, 235, 235, 0.2); /* Semi-transparent fill */
stroke-dasharray: 150; /* Approx path length */
stroke-dashoffset: 150;
animation: drawBellCurve 4s infinite ease-in-out;
filter: drop-shadow(0 0 3px var(--accent-primary));
}
/* Add mean/SD lines */
.icon-stats .axis-line {
position: absolute;
bottom: 0; top: 0; /* Full height */
width: 1px;
background-color: rgba(254, 254, 254, 0.3);
opacity: 0;
animation: fadeInLine 4s infinite ease-in-out;
}
.icon-stats .mean-line { left: 50%; animation-delay: 1s; background-color: rgba(254, 254, 254, 0.5); }
.icon-stats .sd1-left { left: 30%; animation-delay: 1.5s; }
.icon-stats .sd1-right { left: 70%; animation-delay: 1.5s; }
.icon-stats .sd2-left { left: 10%; animation-delay: 2s; }
.icon-stats .sd2-right { left: 90%; animation-delay: 2s; }

@keyframes drawBellCurve {
0% { stroke-dashoffset: 150; fill-opacity: 0; } /* Start empty */
50% { stroke-dashoffset: 0; fill-opacity: 0.2; } /* Draw and fill */
70% { stroke-dashoffset: 0; fill-opacity: 0.2; } /* Hold */
100% { stroke-dashoffset: -150; fill-opacity: 0; } /* Erase */
}
@keyframes fadeInLine {
0%, 20% { opacity: 0; transform: scaleY(0); } /* Delay appearance */
50% { opacity: 1; transform: scaleY(1); } /* Appear with curve */
70% { opacity: 1; transform: scaleY(1); } /* Hold */
100% { opacity: 0; transform: scaleY(0); } /* Fade with curve */
}